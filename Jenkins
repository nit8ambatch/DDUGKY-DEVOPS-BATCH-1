Jenkins
It is a build tool.


ci : continous integration : continous build + continous test 
old code with new code
before ci we have time waste and every thing is manual work.
after ci everything is automated.

cd : continous delivery	  : deployment manually to prod env
cd : continous deployment : deployment automatically to prod env

PIPELINE:
STEP BY STEP EXECUTION OF A PARTICULAR PROCESS.
SERIES OF EVENTS INTERLINKED WITH EACHOTHER.

CODE -- > BUILD -- > TEST -- >  DEPLOY

ENV:
DEV	: DEVELOPERS
QA	: TESTERS
UAT	: CLIENT

THE ABOVE ENVS ARE CALLED AS PRE-PROD OR NON-PROD

PROD	: USER
PROD ENV IS ALSO CALLED AS LIVE ENV

Day 2:-

Jenkins port number - 8080
ssh port number -22
http port number - 80
https - 443
mysql -3306
rdp - 3389

To lunch instance for Jenkins

* Go to aws console and login
* Go to search box type ec2 and select.
* launch instance 
 step 1 - select amazon-linux 2 hvm (ami)
 step 2 - select instance type t2.micro
 step 3 - create new key pair in .pem
 step 4 - create new security group  
           go to edit and provide ssh and all traffic
 step 5 - launch instance.
* Go to instance select connect and go through ssh client-->copy example
Go to browser - jenkins.io - click on download
* Download Jenkins 2.479.2 LTS for: redhat/centos/fedora
   select that

amazon-linux -- yum
Ubuntu     --- apt
redhat      --- rpm

JENKINS: PORT - 8080

SETUP:
STEP-1: GETTING REP0 (jenkins.io -- > downloads -- > Redhat)
sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key

STEP-2: INSTALLING JAVA 11
amazon-linux-extras install java-openjdk11 -y

STEP-3: INSTALLING GIT JENKINS MAVEN 
yum install git maven jenkins -y

STEP-4: STARTING THE SERVICE (any service will be on stopped state when its installed)
systemctl start jenkins
systemctl status jenkins

#STEP-1: INSTALLING GIT JAVA-1.8.0 MAVEN 
yum install git java-1.8.0-openjdk maven -y

#STEP-2: GETTING THE REPO (jenkins.io --> download -- > redhat)
sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key

#STEP-3: DOWNLOAD JAVA11 AND JENKINS
sudo yum install java-17-amazon-corretto -y
yum install jenkins -y
update-alternatives --config java

#STEP-4: RESTARTING JENKINS (when we download service it will on stopped state)
systemctl start jenkins.service
systemctl status jenkins.service

try this installation its workig
sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key
yum install git maven jenkins -y
systemctl start jenkins
systemctl status jenkins


#!/bin/bash

echo "============================="
echo " System Health Report - $(date) "
echo "============================="

# CPU Load
echo -e "\nðŸ”¸ CPU Load:"
uptime | awk -F'load average:' '{ print "Load Average (1, 5, 15 min):" $2 }'

# Memory Usage
echo -e "\nðŸ”¸ Memory Usage:"
free -h | awk 'NR==2{printf "Used: %s / Total: %s\n", $3, $2}'

# Disk Usage
echo -e "\nðŸ”¸ Disk Usage (/ partition):"
df -h / | awk 'NR==2{printf "Used: %s / Total: %s (%s)\n", $3, $2, $5}'

# Uptime
echo -e "\nðŸ”¸ System Uptime:"
uptime -p

# Logged in Users
echo -e "\nðŸ”¸ Currently Logged-in Users:"
who | awk '{print $1}' | sort | uniq

# Top 5 CPU Consuming Processes
echo -e "\nðŸ”¸ Top 5 CPU Consuming Processes:"
ps -eo pid,comm,%cpu --sort=-%cpu | head -n 6

echo -e "\nâœ… Report Complete.\n"


PIPELINE:-

passs
pipeline agent any stages stage and steps

pipeline {
    agent any
    
    stages {
        stage ("stage-1") {
            steps {
                sh 'touch file1 file2'
                sh 'pwd'
                sh 'mkdir d1'
            }
        }
    }
}


pipeline {
    agent any
    
    stages {
        stage ('checkout') {
            steps {
                git url : 'https://github.com/nit8ambatch/Devops-batch123.git'
            }
        }
        stage ('commands') {
            steps {
                sh '''
                touch abc.txt
                df -h
                '''
            }
        }
    }
}


pipeline {
    agent any
   
    stages{
        stage ('Bash script'){
            steps {
                sh '''
                #!/bin/bash

                # Set the CPU usage threshold (in percentage)
                THRESHOLD=80
                # Get the current CPU usage (ignoring the first line)
                CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | awk '{print 100 - $8}')
                # Display CPU usage
                echo "Current CPU Usage: ${CPU_USAGE}%"
                # Check if CPU usage exceeds the threshold
                if (( $(echo "$CPU_USAGE > $THRESHOLD" | bc -l) )); then
                    echo "WARNING: CPU usage is above ${THRESHOLD}%!"
                fi
                '''
            }
        }
    }    
}  


pipeline {
    agent any 
    
    stages{
        stage('checkout') {
            steps {
              git 'https://github.com/devopsbyraham/jenkins-java-project.git'
            }
        }
    }
}



pipeline {
    agent any

    stages {

        stage("Stage-1") {
            steps {
                sh 'touch file1 file2'
                sh 'pwd'
                sh 'mkdir -p d1'
            }
        }

        stage('Checkout Repo 1') {
            steps {
                git url: 'https://github.com/nit8ambatch/Devops-batch123.git'
            }
        }

        stage('Commands') {
            steps {
                sh '''
                touch abc.txt
                df -h
                '''
            }
        }

        stage('CPU Check Script') {
            steps {
                sh '''
                #!/bin/bash
                THRESHOLD=80
                CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | awk '{print 100 - $8}')
                echo "Current CPU Usage: ${CPU_USAGE}%"

                if (( $(echo "$CPU_USAGE > $THRESHOLD" | bc -l) )); then
                    echo "WARNING: CPU usage is above ${THRESHOLD}%!"
                else
                    echo "CPU usage is under control."
                fi
                '''
            }
        }

        stage('Checkout Repo 2') {
            steps {
                git url: 'https://github.com/devopsbyraham/jenkins-java-project.git'
            }
        }
    }
}




 
